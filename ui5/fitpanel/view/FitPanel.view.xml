<mvc:View
   class="sapUiSizeCompact"
   height="100%"
   width="100%"
   xmlns:mvc="sap.ui.core.mvc"
   xmlns:core="sap.ui.core"
   xmlns="sap.m"
   xmlns:l="sap.ui.layout"
   xmlns:form="sap.ui.layout.form"
   controllerName="rootui5.fitpanel.controller.FitPanel">
   <Page id="simplefitpanel_page" title="Simple Fit Panel" showHeader="false">
      <VBox class="sapUiSizeCompact sapUiSmallMarginStart" width="100%">
         <HBox alignItems="Center">
            <Label text="Data Set:" labelFor="DataSet" class="sapUiSmallMarginBeginEnd"/>
            <ComboBox id="DataSet" selectedKey="{/fSelectDataId}" items="{ path: '/fDataSet', sorter: { path: 'fSet' } }" class="sapUiSmallMarginBeginEnd">
                <core:Item key="{fId}" text="{fSet}"/>
            </ComboBox>
         </HBox>
         <HBox alignItems="Center">
           <Label text="Func:" labelFor="TypeFunc" class="sapUiSmallMarginBeginEnd"/>
           <ComboBox id="TypeFunc" class="sapUiSmallMarginBeginEnd"
                     selectedKey="{/fSelectTypeFunc}" items="{ path: '/fTypeFunc', sorter: { path: 'fFunc' } }" change="selectTypeFunc">
              <core:Item key="{fId}" text="{fSet}"/>
           </ComboBox>
           <ComboBox id="selectedFuncCombo" class="sapUiSmallMarginBeginEnd"
                     selectedKey="{/fSelectedFunc}" items="{ path: '/fFuncList', sorter: { path: 'name' } }" change="onSelectedFuncChange">
              <core:Item key="{name}" text="{name}" />
           </ComboBox>
           <Button text="Pars" press="setParametersDialog"/>
         </HBox>
         <HBox alignItems="Center">
            <Label text="Selected " labelFor="OperationText" class="sapUiSmallMarginBeginEnd"/>
            <Input id="OperationText" value="" valueLiveUpdate="{/fOpTextUpdate}" liveChange="operationTextChange" class="sapUiSmallMarginBeginEnd"/>
            <Label id="selectedOpText" text="gaus" class="sapUiSmallMarginBeginEnd"/>
         </HBox>
                        <IconTabBar id="Gen-Min">
                           <items>
                              <IconTabFilter text="General">
                                 <VBox>
                                    <Title level="H3" text="Method"/>
                                    <l:Grid defaultSpan="XL6 L6 M6 S6" class="sapUiSizeCompact" hSpacing="0.5" vSpacing="0">
                                       <ComboBox id="MethodCombo" selectedKey="{/fSelectMethodId}" items="{ path: '/fMethod', sorter: { path: 'fMethod' } }">
                                         <core:Item key="{fId}" text="{fSet}" />
                                       </ComboBox>
                                       <Button text="User-Defined..." press="pressUserDefined"/>
                                       <CheckBox text="Linear fit" selected="{/fLinear}"/>
                                       <HBox>
                                           <CheckBox id="robust123" text="Robust"  enabled="{= ${/fSelectMethodId} === '3'}"
                                                     selected="{/fRobust}" tooltip="Perform Linear Robust fitter if selected"/>
                                           <StepInput
                                              value="0.95"
                                              min="0.01"
                                              max="1"
                                              step="0.01"
                                              displayValuePrecision = "2"
                                              enabled="{= ${/fRobust} === true}"
                                              tooltip="Available only for graphs"/>
                                       </HBox>
                                    </l:Grid>
                                    <Title level="H3" text="Fit Options"/>
                                    <l:Grid defaultSpan="XL6 L6 M6 S6" class="sapUiSizeCompact" hSpacing="0.5" vSpacing="0">
                                       <CheckBox id="Integral" text="Integral" selected="{/fIntegral}" tooltip="'I'-use integral of function instead of value in bin center"/>
                                       <CheckBox text="Use range" selected="{/fUseRange}" tooltip="'R'-fit only data..."/>
                                       <CheckBox text="Best errors" selected="{/fBestErrors}" tooltip="'E'-better ..."/>
                                       <CheckBox text="Improve fit results" selected="{/fImproveFitResults}" tooltip="'M'-after medium is found ..."/>
                                       <CheckBox text="All weights = 1" selected="{/fWeights}" enabled="{= ${/fBins} === false}" tooltip="'W'-all weights=1 for non-empty bins; eroors bars ignored" />
                                       <CheckBox text="Add to list" selected="{/fAddList}" tooltip="'+'-add function to the list without deleting the previous"/>
                                       <CheckBox text="Empty bins, weights=1" selected="{/fBins}" enabled = "{= ${/fWeights} === false}" tooltip="'WW'-all weights=1 including empty bins; errors bars ignored"/>
                                       <CheckBox text="Use Gradient" selected="{/fUseGradient}" tooltip="'G'-Use gradient"/>
                                    </l:Grid>
                                    <Title level="H3" text="Draw Options"/>
                                    <l:Grid defaultSpan="XL6 L6 M6 S6" class="sapUiSizeCompact" hSpacing="0.5" vSpacing="0">
                                       <CheckBox text="SAME" selected="{/fSame}"/>
                                       <CheckBox text="dummy" enabled="false"/>
                                       <CheckBox text="No Drawing" selected ="{/fNoDrawing}"/>
                                       <CheckBox text="dummy" enabled="false"/>
                                       <CheckBox text="Do not store/draw" selected="{/fNoStoreDraw}"/>
                                       <Button text="Advanced..." press="pressAdvanced" enabled="false"/>
                                    </l:Grid>
                                    <RangeSlider id="Slider" showAdvancedTooltip="true" range="{/fRange}" min="{/fMinRange}" max="{/fMaxRange}" step="{/fStep}" width="100%" showHandleTooltip="false" inputsAsTooltips="true" class="sapUiSmallMarginBottom"/>
                                    <FlexBox
                                       alignItems="Start"
                                       justifyContent="End">
                                       <Button text="Update Range" press="updateRange" tooltip="Update the fitting range"/>
                                    </FlexBox>
                                 </VBox>
                              </IconTabFilter>
                              <IconTabFilter text="Minimization">
                                 <l:VerticalLayout id="libraryContainer" class="sapUiSizeCompact">
                                    <Title level="H3" text="Library"/>
                                    <RadioButtonGroup id="libraryRB" columns="3" width="100%"  selectedIndex="{/fLibrary}" select="selectRB">
                                       <buttons>
                                          <RadioButton id="RB2-1" text="Minuit"/>
                                          <RadioButton id="RB2-2" text="Minuit2"/>
                                          <RadioButton id="RB2-3" text="Fumili"/>
                                          <RadioButton id="RB2-4" text="GSL" enabled="false"/>
                                          <RadioButton id="RB2-5" text="Genetics"/>
                                       </buttons>
                                    </RadioButtonGroup>
                                    <Title level="H3" text="Method"/>
                                    <ComboBox id="MethodMin" selectedKey="{/fSelectMethodMinId}" items="{ path: '/fMethodMin', sorter: { path: 'fMethodMin' } }">
                                       <core:Item key="{fId}" text="{fSet}" />
                                    </ComboBox>
                                    <Title level="H3" text="Settings"/>
                                    <Text text="Use ENTER key to validate a new value or click on Reset button to set the defaults."/>
                                    <form:Form id="FormMin"
                                       editable="true"
                                       ariaLabelledBy="Title1">
                                       <form:layout>
                                          <form:ResponsiveGridLayout
                                             labelSpanXL="4"
                                             labelSpanL="3"
                                             labelSpanM="4"
                                             labelSpanS="4"
                                             adjustLabelSpan="false"
                                             emptySpanXL="2"
                                             emptySpanL="0"
                                             emptySpanM="0"
                                             emptySpanS="0"
                                             columnsXL="2"
                                             columnsL="1"
                                             columnsM="1"
                                             singleContainerFullSize="false"/>
                                       </form:layout>
                                       <form:formContainers>
                                          <form:FormContainer ariaLabelledBy="Minimization">
                                             <form:FormElement>
                                                <Label text="Error Definition (default = 1)" labelFor="errorDef">
                                                   <layoutData>
                                                      <l:GridData span="XL1 L4 M3 S6" />
                                                   </layoutData>
                                                </Label>
                                                <Input
                                                   id="errorDef"
                                                   type="Number"
                                                   placeholder="1.00">
                                                   <layoutData>
                                                      <l:GridData span="XL1 L4 M3 S4" />
                                                   </layoutData>
                                                </Input>
                                                <Label text="Max tolerance (precision)" labelFor="maxTolerance">
                                                   <layoutData>
                                                      <l:GridData span="XL1 L4 M3 S6" />
                                                   </layoutData>
                                                </Label>
                                                <Input
                                                   id="maxTolerance"
                                                   type="Number"
                                                   placeholder="0.01">
                                                   <layoutData>
                                                      <l:GridData span="XL1 L4 M3 S4" />
                                                   </layoutData>
                                                </Input>
                                                <Label text="Max number of interations" labelFor="maxInterations">
                                                   <layoutData>
                                                      <l:GridData span="XL1 L4 M3 S6" />
                                                   </layoutData>
                                                </Label>
                                                <Input
                                                   id="maxInterations"
                                                   type="Number"
                                                   placeholder="0">
                                                   <layoutData>
                                                      <l:GridData span="XL1 L4 M3 S4" />
                                                   </layoutData>
                                                </Input>
                                                <CheckBox text="Use gradient" selected="{/fUseGradient}">
                                                   <layoutData>
                                                      <l:GridData span="L4 M6 S6"/>
                                                   </layoutData>
                                                </CheckBox>
                                             </form:FormElement>
                                          </form:FormContainer>
                                       </form:formContainers>
                                    </form:Form>
                                    <Title level="H3" text="Print Options"/>
                                    <RadioButtonGroup columns="3" width="100%"  selectedIndex="{/fPrint}">
                                       <buttons>
                                          <RadioButton id="Print-1" text="Default"/>
                                          <RadioButton id="Print-2" text="Verbose"/>
                                          <RadioButton id="Print-3" text="Quiet"/>
                                       </buttons>
                                    </RadioButtonGroup>
                                    <Panel expandable="true" expanded="false" headerText="Advanced Options" width="auto" class="sapUiBody" expand="advancedOptionsDialog">
                                       <content>
                                          <IconTabBar id="AdvancedOptions">
                                             <items>
                                                <IconTabFilter text="Contour">
                                                   <form:Form id="FormContour"
                                                   editable="true"
                                                   ariaLabelledBy="Title1">
                                                      <form:layout>
                                                         <form:ResponsiveGridLayout
                                                            labelSpanXL="4"
                                                            labelSpanL="3"
                                                            labelSpanM="4"
                                                            labelSpanS="4"
                                                            adjustLabelSpan="false"
                                                            emptySpanXL="2"
                                                            emptySpanL="0"
                                                            emptySpanM="0"
                                                            emptySpanS="0"
                                                            columnsXL="2"
                                                            columnsL="1"
                                                            columnsM="1"
                                                            singleContainerFullSize="false"/>
                                                      </form:layout>
                                                      <form:formContainers>
                                                         <form:FormContainer ariaLabelledBy="Minimization">
                                                            <form:FormElement>
                                                               <Label text="Number of Points:" labelFor="contourPoints">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <StepInput id="contourPoints" value="40" min="0" max="100" step="1" editable="true">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S7" />
                                                                  </layoutData>
                                                               </StepInput>
                                                               <Label text="Parameter 1:" labelFor="ContourPar1">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <ComboBox id="ContourPar1" selectedKey="{/fContourPar1Id}" items="{ path: '/fContour1', sorter: { path: 'fSet' } }">
                                                                  <core:Item key="{fId}" text="{fSet}" />
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S7" />
                                                                  </layoutData>
                                                               </ComboBox>
                                                               <Label text="Parameter 2:" labelFor="ContourPar2">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <ComboBox id="ContourPar2" selectedKey="{/fContourPar2Id}" items="{ path: '/fContour2', sorter: { path: 'fSet' } }">
                                                                  <core:Item key="{fId}" text="{fSet}" />
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S7" />
                                                                  </layoutData>
                                                               </ComboBox>
                                                               <Label text="Confidence Level:" labelFor="ConfLevel">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <StepInput id="ConfLevel" value="0.683" min="0.000" max="100.000" step="0.001" editable="true" displayValuePrecision="3">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S7" />
                                                                  </layoutData>
                                                               </StepInput>
                                                               <Label text="Fill Colour:" labelFor="colorContour">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <Button press="colorPickerContour" id="colorContour">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S2"/>
                                                                  </layoutData>
                                                               </Button>
                                                               <CheckBox id="contourImpose" text="Super impose" selected="{/fContourImpose}">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4"/>
                                                                  </layoutData>
                                                               </CheckBox>
                                                               <Button text="Draw" press="drawContour">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S5"/>
                                                                  </layoutData>
                                                               </Button>
                                                               <Button text="Close" press="">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4"/>
                                                                  </layoutData>
                                                               </Button>
                                                            </form:FormElement>
                                                         </form:FormContainer>
                                                      </form:formContainers>
                                                   </form:Form>
                                                </IconTabFilter>
                                                <IconTabFilter text="Scan">
                                                   <form:Form id="FormScan"
                                                   editable="true"
                                                   ariaLabelledBy="Title1">
                                                      <form:layout>
                                                         <form:ResponsiveGridLayout
                                                            labelSpanXL="4"
                                                            labelSpanL="3"
                                                            labelSpanM="4"
                                                            labelSpanS="4"
                                                            adjustLabelSpan="false"
                                                            emptySpanXL="2"
                                                            emptySpanL="0"
                                                            emptySpanM="0"
                                                            emptySpanS="0"
                                                            columnsXL="2"
                                                            columnsL="1"
                                                            columnsM="1"
                                                            singleContainerFullSize="false"/>
                                                      </form:layout>
                                                      <form:formContainers>
                                                         <form:FormContainer ariaLabelledBy="Minimization">
                                                            <form:FormElement>
                                                               <Label text="Number of Points:" labelFor="scanPoints">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <StepInput id="scanPoints" value="40" min="0" max="100" step="1" editable="true">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S7" />
                                                                  </layoutData>
                                                               </StepInput>
                                                               <Label text="Parameter 1:" labelFor="ScanPar">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <ComboBox id="ScanPar" selectedKey="{/fScanId}" items="{ path: '/fScan', sorter: { path: 'fSet' } }">
                                                                  <core:Item key="{fId}" text="{fSet}" />
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S7" />
                                                                  </layoutData>
                                                               </ComboBox>
                                                               <Label text="Min:" labelFor="scanMin">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <StepInput id="scanMin" value="0.0001" min="0.0001" max="100.0000" step="0.0001" editable="true" displayValuePrecision="4">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S7" />
                                                                  </layoutData>
                                                               </StepInput>
                                                               <Label text="Max:" labelFor="scanMax">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <StepInput id="scanMax" value="0.0001" min="0.0001" max="100.0000" step="0.0001" editable="true" displayValuePrecision="4">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S7" />
                                                                  </layoutData>
                                                               </StepInput>
                                                               <Button text="Draw" press="drawScan">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4"/>
                                                                  </layoutData>
                                                               </Button>
                                                               <Button text="Close" press=" ">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4"/>
                                                                  </layoutData>
                                                               </Button>
                                                            </form:FormElement>
                                                         </form:FormContainer>
                                                      </form:formContainers>
                                                   </form:Form>
                                                </IconTabFilter>
                                                <IconTabFilter text="Conf Intervals">
                                                   <form:Form id="FormConf"
                                                   editable="true"
                                                   ariaLabelledBy="Title1">
                                                      <form:layout>
                                                         <form:ResponsiveGridLayout
                                                            labelSpanXL="4"
                                                            labelSpanL="3"
                                                            labelSpanM="4"
                                                            labelSpanS="4"
                                                            adjustLabelSpan="false"
                                                            emptySpanXL="2"
                                                            emptySpanL="0"
                                                            emptySpanM="0"
                                                            emptySpanS="0"
                                                            columnsXL="2"
                                                            columnsL="1"
                                                            columnsM="1"
                                                            singleContainerFullSize="false"/>
                                                      </form:layout>
                                                      <form:formContainers>
                                                         <form:FormContainer ariaLabelledBy="Minimization">
                                                            <form:FormElement>
                                                               <Label text="Confidence Level:" labelFor="ConfLevelInt">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <StepInput id="ConfLevelInt" value="0.95" min="0.01" max="100" step="0.01" editable="true" displayValuePrecision="2">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S7" />
                                                                  </layoutData>
                                                               </StepInput>
                                                               <Label text="Fill Colour:" labelFor="colorConf">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S4" />
                                                                  </layoutData>
                                                               </Label>
                                                               <Button press="colorPickerConf" id="colorConf">
                                                                  <layoutData>
                                                                     <l:GridData span="XL1 L4 M3 S2"/>
                                                                  </layoutData>
                                                               </Button>
                                                               <Button text="Draw" press=" ">
                                                                     <layoutData>
                                                                        <l:GridData span="XL1 L4 M3 S5"/>
                                                                     </layoutData>
                                                                  </Button>
                                                                  <Button text="Close" press=" ">
                                                                     <layoutData>
                                                                        <l:GridData span="XL1 L4 M3 S5"/>
                                                                     </layoutData>
                                                                  </Button>
                                                            </form:FormElement>
                                                         </form:FormContainer>
                                                      </form:formContainers>
                                                   </form:Form>
                                                </IconTabFilter>
                                             </items>
                                          </IconTabBar>
                                       </content>
                                    </Panel>
                                 </l:VerticalLayout>
                              </IconTabFilter>
                           </items>
                        </IconTabBar>
      </VBox>
      <footer>
         <Toolbar>
            <ToolbarSpacer/>
            <Button text="Fit" press="doFit" tooltip="Fit the histogram"/>
            <Button text="Reset" press="resetPanel" tooltip="Reset to initial state"/>
            <Button text="Back" press="backPanel" tooltip="Go to the previous fitting"/>
            <Button text="Close" press="closePanel" tooltip="Close the Fit Panel"/>
         </Toolbar>
      </footer>
   </Page>
</mvc:View>
