// @(#)root/net:$Id$
// Author: Marcelo Sousa   23/08/2011

/*************************************************************************
 * Copyright (C) 1995-2011, Rene Brun and Fons Rademakers.               *
 * All rights reserved.                                                  *
 *                                                                       *
 * For the licensing terms see $ROOTSYS/LICENSE.                         *
 * For the list of contributors see $ROOTSYS/README/CREDITS.             *
 *************************************************************************/

#ifndef ROOT_TGTFile
#define ROOT_TGTFile

//////////////////////////////////////////////////////////////////////////
//                                                                      //
// TGTFile                                                              //
//                                                                      //
// A TGTFile is a normal TWebFile but it reads data from the            //
// Google Storage server. As a derived TWebFile class TGTFile it is     //
// a read only file. The HTTP requests are generated by THTTPMessage    //
// objects with the auth_prefix set as GOOG1. The user id and secret    //
// pass required to sign the requests are passed through the            //
// environment variables GT_ACCESS_ID and GT_ACCESS_KEY.                //
// For more information check:                                          //
//   http://code.google.com/apis/storage/docs/getting-started.html      //
//                                                                      //
//////////////////////////////////////////////////////////////////////////

#ifndef ROOT_TWebFile
#include "TWebFile.h"
#endif

#ifndef ROOT_TUrl
#include "TUrl.h"
#endif

#ifndef ROOT_TString
#include "TString.h"
#endif

class TGTFile: public TWebFile {

private:
   TGTFile();
  
protected:
   TString auth_prefix;
   TString access_id;
   TString access_key;
   TUrl    fServer;
   TString fBucket;
      
   Int_t  GetHead();
   Bool_t ReadBuffer10(char *buf, Int_t len);
  
public:
   TGTFile(const char *url, Option_t * option = "GT");
   virtual ~TGTFile() { }

   TString GetAuthPrefix() const { return auth_prefix; }
   TString GetAccessId() const { return access_id; }
   TString GetAccessKey() const { return access_key; }
   TUrl    GetUrl() const { return fServer; }
   TString GetBucket() const { return fBucket; }

   ClassDef(TGTFile, 0)  // Read a ROOT file from the Google Storage cloud
};

#endif
