name: clang-tools code analysis

on: pull_request
  # push:
  #   branches: [ $default-branch ]
  # pull_request:
  #   branches: [ $default-branch ]

jobs:
  clang-format:
    runs-on: ubuntu-latest
    env:
      TRAVIS_BRANCH: ${{ github.base_ref }} 
      TRAVIS_PULL_REQUEST_BRANCH: ${{ github.head_ref }}
    steps:
    - uses: actions/checkout@v2
    - name: also pull base branch
      run: git pull origin $TRAVIS_BRANCH
    - name: run clang-format script
      run: .ci/format_script.sh
